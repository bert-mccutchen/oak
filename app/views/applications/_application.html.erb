<li id="<%= application.token %>" class="group list-row hover:bg-base-300" data-sortable-update-url="<%= application_path(application) %>">
  <% if application.positionable? %>
    <div class="flex cursor-grab">
      <i class="fa-solid fa-grip-vertical my-auto"></i>
    </div>
  <% end %>
  <%= icon_tag application.icon, class: "size-10 fill-primary my-auto" %>
  <div class="list-col-grow my-auto">
    <%# Disabling for now, there is an issue with redirects + broadcasts. %>
    <%# turbo_stream_from application %>
    <div class="line-clamp-1"><%= application.name %></div>
    <div class="text-xs line-clamp-1 text-base-content/48">
      <%= tag.span(application.description, class: "group-hover:hidden") if application.description.present? %>
      <%= tag.span(application.url, class: token_list("hidden group-hover:inline" => application.description.present?)) %>
    </div>
  </div>
  <div class="hidden sm:flex flex-col sm:flex-row gap-4 my-auto">
    <%= form_with(model: application, class: "my-auto") do |form| %>
      <div class="tooltip" data-tip="Enabled">
        <%= form.check_box :enabled, class: "toggle-lg", onchange: "this.form.requestSubmit()" %>
      </div>
    <% end %>

    <div class="tooltip" data-tip="Edit">
      <%= link_to edit_application_path(application), class: "btn btn-soft hover:btn-primary" do %>
        <i class="fa-solid fa-pen"></i>
      <% end %>
    </div>

    <div class="tooltip" data-tip="Delete">
      <%= button_to application, method: :delete, class: "btn btn-error btn-soft hover:btn-error", data: { turbo_confirm: "Confirm deletion of #{application.name}.", confirm_button: "Delete" } do %>
        <i class="fa-solid fa-trash"></i>
      <% end %>
    </div>
  </div>
  <div class="sm:hidden flex items-center">
    <%= render "fab", application: %>
  </div>
</li>

